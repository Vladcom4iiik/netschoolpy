# Вход через Госуслуги (ESIA)

`netschoolpy` поддерживает вход в дневник через единую систему идентификации и аутентификации (ЕСИА / Госуслуги).

## Как это работает?

В отличие от обычной авторизации (где вы вводите логин и пароль от NetSchool), здесь используется ваш аккаунт Госуслуг.

## Пример кода

Для входа через Госуслуги используйте метод `login_esia`.

```python
import asyncio
from netschoolpy import NetSchool

async def main():
    url = 'https://sgo.your-region.ru' # Адрес вашего дневника
    
    async with NetSchool(url) as ns:
        # Вход через ESIA
        await ns.login_esia('ваш_телефон_или_email', 'пароль_от_госуслуг')
        
        # После успешного входа можно получать данные как обычно
        diary = await ns.diary()
        print(f"Дневник получен! Уроков: {len(diary.days)}")

if __name__ == '__main__':
    asyncio.run(main())
```

!!! warning "Важно"
    Библиотека **не сохраняет** ваш логин и пароль. Они отправляются только на сервера Госуслуг для получения токена доступа.
    Если у вас включена **двухфакторная аутентификация (2FA)** на Госуслугах, вход через библиотеку может потребовать ввода кода из SMS (функционал ввода кода находится в разработке или может требовать ручного вмешательства).

## Возможные проблемы

1.  **Неверный регион:** Убедитесь, что URL `NetSchool` (`https://sgo...`) поддерживает вход через Госуслуги (на странице входа должна быть кнопка "Войти через Госуслуги").
2.  **Капча:** Если Госуслуги потребуют ввести капчу, библиотека выбросит исключение `AuthError`.
